proxy-providers:
  tannel:
    type: http
    url: "https://psub.xpsub.fun/sub?target=clash&url=https%3A%2F%2FAhngt2qcyM.qinyues4.cc%2F513ef77981c9f88316ab9cdb811f7b87&insert=false"
    interval: 86400
    path: ./tannel.yaml
    exclude-filter: "åŒ—äº¬æ—¶é—´|å‰©ä½™æµé‡|è¿‡æœŸæ—¶é—´|ç½‘ç«™åœ°å€"
    proxy: DIRECT
    health-check:
      enable: true
      url: https://www.google.com/generate_204
      interval: 300    
    override:
      udp: true
      down: "50 Mbps"
      up: "10 Mbps"
      skip-cert-verify: true
      
# å…¨å±€é…ç½®
port: 7890
socks-port: 7891
redir-port: 7892
mixed-port: 7893
tproxy-port: 7894
allow-lan: true    # å…è®¸å±€åŸŸç½‘
bind-address: "*"    # ç»‘å®šåœ°å€ï¼Œä»…å…è®¸å…¶ä»–è®¾å¤‡é€šè¿‡è¿™ä¸ªåœ°å€è®¿é—®
mode: Rule
log-level: info
ipv6: false
unified-delay: true    # ç»Ÿä¸€å»¶è¿Ÿ
tcp-concurrent: true    # tcpå¹¶å‘
find-process-mode: off    # æ§åˆ¶æ˜¯å¦è®© Clash å»åŒ¹é…è¿›ç¨‹
global-client-fingerprint: chrome    # ä¼ªè£…æŒ‡çº¹
# ç§»åŠ¨è®¾å¤‡çœç”µ
keep-alive-idle: 600
keep-alive-interval: 15
disable-keep-alive: false
profile:
  store-selected: true    # å‚¨å­˜ API å¯¹ç­–ç•¥ç»„çš„é€‰æ‹©ï¼Œä»¥ä¾›ä¸‹æ¬¡å¯åŠ¨æ—¶ä½¿ç”¨
  store-fake-ip: true    # å‚¨å­˜ fakeip æ˜ å°„è¡¨ï¼ŒåŸŸåå†æ¬¡å‘ç”Ÿè¿æ¥æ—¶ï¼Œä½¿ç”¨åŸæœ‰æ˜ å°„åœ°å€

# æ•°æ®åº“
geo-auto-update: false # æ˜¯å¦è‡ªåŠ¨æ›´æ–° geodata
geo-update-interval: 24 # æ›´æ–°é—´éš”ï¼Œå•ä½ï¼šå°æ—¶
geox-url:
  geoip: "https://github.xgithub.fun/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geoip-lite.dat"
  geosite: "https://github.xgithub.fun/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/geosite.dat"
#  mmdb: "https://github.xgithub.fun/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/country-lite.mmdb"
#  asn: "https://github.xgithub.fun/https://github.com/MetaCubeX/meta-rules-dat/releases/download/latest/GeoLite2-ASN.mmdb"

# æ§åˆ¶é¢æ¿  
external-controller: 0.0.0.0:9090    # APIæ§åˆ¶é¢æ¿
secret: ""

# å—…æ¢
sniffer:
  enable: true
  sniff:
    HTTP:
      ports: [80, 8080-8880]
      override-destination: true
    TLS:
      ports: [443, 8443]
    QUIC:
      ports: [443, 8443]
  force-domain:
    - "+.v2ex.com"
  skip-domain:
    - "+.baidu.com"

# å…¥ç«™  
tun:
  enable: true
  # system/gvisor/mixed
  stack: mixed
  dns-hijack:
    - any:53
    - tcp://any:53
  auto-route: true
  auto-redirect: true
  auto-detect-interface: true
  route-exclude-address-set:
    - "rule-set:cn_ip"
  
# DNSæ¨¡å—
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  respect-rules: true
  enhanced-mode: fake-ip
  fake-ip-range: 28.0.0.1/8
  fake-ip-filter-mode: blacklist
  fake-ip-filter:
    - "rule-set:private_domain,cn_domain"
    - "+.services.googleapis.cn"
    - "+.pool.ntp.org"
    - "+.ntp.tencent.com"
    - "+.ntp1.aliyun.com"
    - "+.ntp.ntsc.ac.cn"
    - "+.cn.ntp.org.cn"
    - "+.msftconnecttest.com"
    - "+.msftncsi.com"
    - "time.*.com"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  direct-nameserver:  # ç”¨äº direct å‡ºå£åŸŸåè§£æçš„ DNS æœåŠ¡å™¨
    - 223.5.5.5
  direct-nameserver-follow-policy: false
  proxy-server-nameserver:
    - https://223.5.5.5/dns-query
  # nameseverå°½é‡ç”¨è¿è¥å•†æä¾›çš„DNS
  nameserver:
    - 223.5.5.5
    - 119.29.29.29
  fallback:
    - https://1.1.1.1/dns-query
    - tls://dns.rubyfish.cn:853

# è‡ªå»ºèŠ‚ç‚¹æ·»åŠ åˆ°è¿™é‡Œ
proxies: 

# ç­–ç•¥ç»„
proxy-groups:
  - name: ğŸš€ èŠ‚ç‚¹é€‰æ‹©
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
      - DIRECT
      - â™»ï¸ è‡ªåŠ¨é€‰æ‹©      

  - name: ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - tannel
    filter: (?i)é¦™æ¸¯

  - name: ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - tannel
    filter: (?i)ç¾å›½

  - name: ğŸŒ å…¶ä»–èŠ‚ç‚¹
    type: select
    use:
      - tannel
    exclude-filter: "é¦™æ¸¯|ç¾å›½"

  - name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©
    type: url-test
    url: http://www.gstatic.com/generate_204
    interval: 300
    tolerance: 50
    use:
      - tannel

  - name: ğŸŸ æ¼ç½‘ä¹‹é±¼
    type: select
    proxies:
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©
      - DIRECT

  - name: ğŸ¡ JNAS
    type: select
    proxies:
      - DIRECT    
      - ğŸš€ èŠ‚ç‚¹é€‰æ‹©

  - name: ğŸ¤– AI
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
      - DIRECT

  - name: ğŸ Apple
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
      - DIRECT

  - name: ğŸªŸ Microsoft
    type: select
    proxies:
      - ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
      - ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
      - ğŸŒ å…¶ä»–èŠ‚ç‚¹
      - DIRECT

  - name: ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
    type: select
    proxies:
      - REJECT
      - DIRECT

rules:
  - SRC-IP-CIDR,192.168.110.211/32,ğŸ¡ JNAS
  - DOMAIN-SUFFIX,xn--ngstr-lra8j.com,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - DOMAIN-SUFFIX,services.googleapis.cn,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,GoogleCNProxyIP,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,LocalAreaNetwork,DIRECT
  - RULE-SET,custom_ad,ğŸ›‘ å¹¿å‘Šæ‹¦æˆª
  - RULE-SET,custom_direct,DIRECT
  - RULE-SET,custom_HK,ğŸ‡­ğŸ‡° é¦™æ¸¯è‡ªåŠ¨
  - RULE-SET,custom_US,ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
  - RULE-SET,whatsApp,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,ai_domain,ğŸ¤– AI
  - RULE-SET,google_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,youtube_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,github_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©  
  - RULE-SET,tiktok_domain,ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
  - RULE-SET,telegram_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,netflix_domain,ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨
  - RULE-SET,paypal_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,gfw_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,geolocation-!cn_domain,ğŸš€ èŠ‚ç‚¹é€‰æ‹©
  - RULE-SET,microsoft_domain,ğŸªŸ Microsoft
  - RULE-SET,onedrive_domain,ğŸªŸ Microsoft
  - RULE-SET,apple_domain,ğŸ Apple
  - RULE-SET,google_ip,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - RULE-SET,telegram_ip,ğŸš€ èŠ‚ç‚¹é€‰æ‹©,no-resolve
  - RULE-SET,netflix_ip,ğŸ‡ºğŸ‡² ç¾å›½è‡ªåŠ¨,no-resolve
  - RULE-SET,cn_domain,DIRECT
  - RULE-SET,speedtest_domain,DIRECT
  - RULE-SET,cn_ip,DIRECT,no-resolve
  - MATCH,ğŸŸ æ¼ç½‘ä¹‹é±¼

# è§„åˆ™é›†
rule-providers:

# åŸŸåé›†
  GoogleCNProxyIP:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleCNProxyIP.list"
    path: ./GoogleCNProxyIP.list
    interval: 86400
    behavior: classical
    format: text
    proxy: DIRECT

  LocalAreaNetwork:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/LocalAreaNetwork.list"
    path: ./LocalAreaNetwork.list
    interval: 86400
    behavior: classical
    format: text
    proxy: DIRECT

  apple_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/apple-cn.yaml"
    path: ./apple_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  ai_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/refs/heads/meta/geo/geosite/category-ai-!cn.yaml"
    path: ./ai_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT

  google_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/google.yaml"
    path: ./google_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  youtube_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/youtube.yaml"
    path: ./youtube_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml    
    proxy: DIRECT
    
  github_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/github.yaml"
    path: ./github_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  tiktok_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/tiktok.yaml"
    path: ./tiktok_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  telegram_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/telegram.yaml"
    path: ./telegram_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  netflix_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/netflix.yaml"
    path: ./netflix_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  paypal_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/paypal.yaml"
    path: ./paypal_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  gfw_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/gfw.yaml"
    path: ./gfw_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  geolocation-!cn_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/geolocation-!cn.yaml"
    path: ./geolocation-!cn_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
    
  microsoft_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/microsoft.yaml"
    path: ./microsoft_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT

  onedrive_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/onedrive.yaml"
    path: ./onedrive_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT

  cn_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/cn.yaml"
    path: ./cn_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT

  speedtest_domain:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geosite/ookla-speedtest.yaml"
    path: ./speedtest_domain.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT

# ipé›†
  google_ip:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/google.yaml"
    path: ./google_ip.yaml
    interval: 86400
    behavior: ipcidr
    format: yaml
    proxy: DIRECT

  telegram_ip:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/telegram.yaml"
    path: ./telegram_ip.yaml
    interval: 86400
    behavior: ipcidr
    format: yaml
    proxy: DIRECT

  netflix_ip:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/netflix.yaml"
    path: ./netflix_ip.yaml
    interval: 86400
    behavior: ipcidr
    format: yaml
    proxy: DIRECT 
    
  cn_ip:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/MetaCubeX/meta-rules-dat/meta/geo/geoip/cn.yaml"
    path: ./cn_ip.yaml
    interval: 86400
    behavior: ipcidr
    format: yaml
    proxy: DIRECT

# è‡ªå®šä¹‰é›†classical,yaml

  whatsApp:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/whatsApp.yaml"
    path: ./whatsApp.yaml
    interval: 86400
    behavior: classical
    format: yaml
    proxy: DIRECT

  custom_direct:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/custom_direct.yaml"
    path: ./custom_direct.yaml
    interval: 86400
    behavior: classical
    format: yaml
    proxy: DIRECT

  custom_HK:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/custom_HK.yaml"
    path: ./custom_HK.yaml
    interval: 86400
    behavior: classical
    format: yaml
    proxy: DIRECT

  custom_US:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/custom_US.yaml"
    path: ./custom_US.yaml
    interval: 86400
    behavior: classical
    format: yaml
    proxy: DIRECT

  custom_ad:
    type: http
    url: "https://github.xgithub.fun/https://raw.githubusercontent.com/JakeFan352/VPN/refs/heads/main/custom_ad.yaml"
    path: ./custom_ad.yaml
    interval: 86400
    behavior: domain
    format: yaml
    proxy: DIRECT
